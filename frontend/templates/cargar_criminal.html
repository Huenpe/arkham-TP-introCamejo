<!DOCTYPE html>
<html lang="es">
	<head>
		<meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="stylesheet" href="../static/css/estilo.css" type="text/css" />
		<title>Cargar Criminal</title>
	</head>
	<body>
		<div class="contenedor">

			<nav>
				<ul>
					<li><a href="inicio.html">Inicio</a></li>
					<li><a href="criminales.html">Criminales</a></li>
					<li><a href="delitos.html">Delitos</a></li>
					<li><a href="celdas.html">Celdas</a></li>
					<li><a href="personal.html">Personal</a></li>
                    <li class="cargar"><a href="cargar_criminal.html">Cargar Criminal</a></li>
				</ul>
			</nav>
			<main>
				<header>
					<div class="header-overlay">
						<div class="header-text">
							<h1>Agregar Criminal</h1>
							<p>Introduce los datos del criminal que deseas agregar al sistema.</p>
						</div>
					</div>
				</header>

				<section class="secciones">
					<h2 class="titulos">Cargar un criminal</h2>
					<form id="form-criminal" action="javascript:void(0)">
						<label for="nombre">Nombre:</label>
						<input type="text" id="nombre" name="nombre" required>

						<label for="apodo">Apodo:</label>
						<input type="text" id="apodo" name="apodo" required>

						<label for="edad">Edad:</label>
						<input type="number" id="edad" name="edad" required>

						<label for="genero">GÃ©nero:</label>
						<input type="text" id="genero" name="genero" required>

						<label for="tratamiento">Tratamiento:</label>
						<input type="text" id="tratamiento" name="tratamiento" required>

						<label for="peligrosidad">Peligrosidad:</label>
						<input type="text" id="peligrosidad" name="peligrosidad" required>

						<label for="personal_asignado">Personal Asignado (ID):</label>
						<input type="number" id="personal_asignado" name="personal_asignado" required>

						<label for="celda">Celda:</label>
						<input type="number" id="celda" name="celda" required>

						<button type="submit">Cargar Criminal</button>
					</form>
				</section>

			</main>

			<footer>
				<p>hecho por batman</p>
			</footer>
		</div>

		<script>
			document.getElementById('form-criminal').addEventListener('submit', function(event) {
				event.preventDefault();

				const criminalData = {
					nombre: document.getElementById('nombre').value,
					apodo: document.getElementById('apodo').value,
					edad: parseInt(document.getElementById('edad').value), 
					genero: document.getElementById('genero').value,
					tratamiento: document.getElementById('tratamiento').value,
					peligrosidad: document.getElementById('peligrosidad').value,
					personal_asignado: parseInt(document.getElementById('personal_asignado').value),
					celda: parseInt(document.getElementById('celda').value)
				};

				fetch('http://127.0.0.1:3002/api/v1/criminales', {
					method: 'POST',
					headers: {
						'Content-Type': 'application/json',
					},
					body: JSON.stringify(criminalData)
				})
				.then(response => response.json())
				.then(data => {
					alert('Criminal agregado correctamente');
					window.location.href = 'criminales.html';
				})
			});
		</script>
	</body>
</html>
